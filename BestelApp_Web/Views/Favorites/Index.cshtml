@model List<BestelApp_Web.Services.FavoriteResponse>

@{
    ViewData["Title"] = "Mijn Favorieten";
}

<div class="container" style="padding-top: var(--spacing-2xl); max-width: 1100px;">
    <div class="catalog-hero" style="margin-bottom: var(--spacing-2xl);">
        <div class="catalog-kicker">Mijn Collectie</div>
        <h1 class="catalog-title">Mijn Favorieten</h1>
        <p class="catalog-subtitle">Je favoriete schoenen verzameld op √©√©n plek.</p>
    </div>
</div>

<div class="container">
    @if (Model != null && Model.Any())
    {
        <div class="product-grid">
            @foreach (var favorite in Model)
            {
                <div class="product-card">
                    <a asp-controller="Shoes" asp-action="Details" asp-route-id="@favorite.Shoe.Id" class="product-card-link"></a>
                    <!-- Product Image -->
                    <div class="product-image-container">
                        @if (!string.IsNullOrEmpty(favorite.Shoe.ImageUrl))
                        {
                            <img src="@favorite.Shoe.ImageUrl"
                                 alt="@favorite.Shoe.Name"
                                 class="product-image"
                                 onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22600%22%3E%3Crect fill=%22%23f8f9fa%22 width=%22800%22 height=%22600%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 font-size=%2260%22%3Eüëü%3C/text%3E%3C/svg%3E';" />
                        }
                        else
                        {
                            <div style="font-size: 5rem; color: hsl(var(--muted-foreground));">üëü</div>
                        }

                        <!-- Action Buttons -->
                        <div class="product-actions">
                            <form asp-action="Remove" asp-route-shoeId="@favorite.ShoeId" method="post" style="display:inline;" onclick="event.stopPropagation();">
                                <button type="submit" class="icon-btn favorite-btn" title="Verwijder uit favorieten">
                                    <i data-lucide="heart" style="width:18px;height:18px; fill: hsl(var(--danger)); color: hsl(var(--danger));"></i>
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Product Info -->
                    <div class="product-info p-3">
                        <div class="product-category">@(favorite.Shoe.Category ?? "Schoenen")</div>
                        <h3 class="product-name">@favorite.Shoe.Name</h3>
                        <p class="product-brand">@favorite.Shoe.Brand</p>
                        <div class="product-price">‚Ç¨@favorite.Shoe.Price.ToString("0.00")</div>
                        
                        @if (favorite.Shoe.Variants != null && favorite.Shoe.Variants.Any(v => v.IsAvailable))
                        {
                            <div class="product-stock-info stock-available" style="font-size: 0.85rem; margin-top: 0.5rem;">
                                <i data-lucide="check-circle" style="width:14px;height:14px;"></i> Beschikbaar
                            </div>
                        }
                        else
                        {
                            <div class="product-stock-info stock-unavailable" style="font-size: 0.85rem; margin-top: 0.5rem;">
                                <i data-lucide="x-circle" style="width:14px;height:14px;"></i> Uitverkocht
                            </div>
                        }
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="card-luxe p-5 text-center">
            <div style="font-size: 5rem; margin-bottom: 1rem; color: hsl(var(--muted-foreground));">‚ù§Ô∏è</div>
            <h3 style="font-family: 'Playfair Display', serif; color: hsl(var(--foreground)); margin-bottom: 0.75rem;">Nog geen favorieten</h3>
            <p style="color: hsl(var(--muted-foreground)); margin-bottom: 1.5rem;">Voeg schoenen toe aan je favorieten om ze hier te zien.</p>
            <a asp-controller="Shoes" asp-action="Index" class="btn-luxe">Bekijk Schoenen</a>
        </div>
    }
</div>
